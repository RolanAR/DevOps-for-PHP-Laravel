# DevOps-for-PHP-Laravel
Разработка девопс-процессов с нуля для PHP Laravel для маленькой компании 

Задачи
Часть 1
1. Развернуть виртуальные машины с linux с именами: app01, gitlab, vpn01, db01. Можно использовать любые хостинги и способы создания, в том числе и локально на Vargant
3. Развернуть СУБД  PostgreSQL на виртуальной машине db01. Создать базу данных и пользователя. Разрешить доступ только из внутренней сети.
4. Развернуть и запустить собственный Gitlab по официальной инструкции
5. Создать репозиторий и залить [код приложения](https://gitfront.io/r/deusops/2cL1ba8fzWDo/laravel-project-travellist/) в собственный Gitlab
6. Подготовить окружение и развернуть приложение на сервере app01

Часть 2
1. Разработать систему деплоя приложения на хост app01 - написать CICD-пайплайн, который будет обновлять приложение на хосте
2. Освоить механику бесшовных деплоев через симлинки. Реализовать возможность отката на предыдущую версию и бесшовное переключение на новую версию после деплоя
3. Создать дополнительную машину с именем prod01 и добавить развертывание на неё в пайплайн. Разработать правила внутри пайплайна для безопасного деплоя на прод и на дев (app01)

Часть 3
1. Написать ansible-роль для установки PostgreSQL. Создать плейбук, который будет обслуживать инфраструктуру, и применить эту роль для хостов группы db
2. Разработать роль установки OpenVPN. Добавить её в плейбук с применением для хостов группы vpn. Развернуть VPN-сервер на машине vpn01
3. Роль установки OpenVPN должна создавать пользователей и сохранять в результате выполнения файлы ovpn для подключения клиентов. Подключение к VPN должно давать доступ к контуру, который вы разработали.
4. Написать Ansible-роль для подготовки окружения на машинах app, добавить её в плейбук для группы хостов app
5. Сохранить плейбук в специальный инфраструктурный репозиторий. Сохранить роли в отдельные репозитории с подключением к плейбуку через версионируемые зависимости в galaxy. Написать Gitlab CI для репозитория, который будет прогонять плейбук при изменении и настраивать инфраструктуру

Часть 4
1. Развернуть базовую систему мониторинга и сбора логов на основе ELK
2. Включить оба контура в мониторинг, разработать базовые дашборды
3. Создать документацию с описанием архитектуры, настроек и процедур обслуживания для вашей инфраструктуры
4. Оформить систему мониторинга в виде Ansible-ролей и  включить их в плейбук развертывания инфраструктуры
